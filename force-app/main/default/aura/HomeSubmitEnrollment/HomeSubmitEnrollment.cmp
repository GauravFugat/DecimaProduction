<aura:component controller="HomesubmitEnrollment" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,lightning:isUrlAddressable" access="global" >
    <aura:attribute name="openModelBoolean" type="boolean" default="false"  />
    <aura:attribute name="pageList" type="List"/>  
    <aura:attribute name="divHeight" type="Integer" default="800" />
    <aura:attribute name="totalRecordsCount" type="Integer"/>
    <aura:attribute name="BatchData" type="list"/> 
    <aura:attribute name="TotalData" type="list"/> 
    <aura:attribute name="SelectedData" type="list"/> 
    <aura:attribute name="totalPages" type="Integer" default="0"/>
    <aura:attribute name="pageSize" type="Integer" default="10"
                    description="number of records to be display on per page"/>
    <aura:attribute name="currentPageNumber" type="Integer" default="1"/>
    <aura:attribute name="PaginationList" type="list"/> 
    <aura:attribute name="selectedOptBoolean" 	type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean1"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean2"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean3"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean4"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean5"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean6"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean7"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean8"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean9"  type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean10" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean11" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean12" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean13" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean14" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean15" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean16" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean17" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean18" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean19" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean20" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean21" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean22" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean23" type="boolean" default="false"  />
    <aura:attribute name="selectedOptBoolean24" type="boolean" default="false"  />
    <aura:attribute name="sQuery" type="String[]"/>
    <aura:attribute name="dateFilterModal" type="boolean" default="false"  />
    <aura:attribute name="selectedOptions" type="string" default=" test"  />
    <aura:attribute name="options" type="List" default="[
                                                        { label: 'Enrollment ID', value: 'enrollmentID' },
                                                        { label: 'Customer ID', value: 'customerID' },
                                                        { label: 'Contract', value: 'contract' },
                                                        { label: 'Contract Signed Date', value: 'contractSignedDate' },
                                                        { label: 'Bill Type', value: 'billType' },
                                                        { label: 'Product', value: 'product' },
                                                        { label: 'Company Name', value: 'companyName' },
                                                        { label: 'Utility', value: 'utility' },
                                                        { label: 'Utility Account Number', value: 'utilityAccountNumber' },
                                                        { label: 'Contract Start', value: 'contractStart' },
                                                        { label: 'Contract Term', value: 'contractTerm' },
                                                        { label: 'Rate Amount', value: 'rateAmount' },
                                                        { label: 'Tax Exempt', value: 'taxExempt' },
                                                        { label: 'Customer Type', value: 'customerType' },
                                                        { label: 'Avg. Meter Read Date', value: 'avgMeterReadDate' },
                                                        { label: 'Broker', value: 'broker' },
                                                        { label: 'Account Owner', value: 'accountOwner' },
                                                        { label: 'Market Rate Code', value: 'marketRateCode' },
                                                        { label: 'Status', value: 'Status' },
                                                        { label: 'Service Address', value: 'serviceAddress' },
                                                        { label: 'Service Class', value: 'serviceClass' },
                                                        { label: 'Taxable Portion', value: 'taxablePortion' },
                                                        { label: 'AutoSubmitFlag', value: 'autoSubmitFlag' },
                                                        { label: 'Auto Submitted Date', value: 'AutoSubmittedDate' },
                                                        { label: 'RateClass', value: 'rateClass' }]"/>
    <aura:attribute name="prvSelectedOptions" type="List" />
    <lightning:spinner aura:id="mySpinner" alternativeText="Processing.." title="Processing.." variant="brand" size="large" class="slds-hide"/>
    <aura:attribute name="invalidDate" type="boolean" default="false"/>
    <aura:attribute name="utilityAccountEnrollments" type="list"/>
    <aura:attribute name="enrollmentBillType" type="String" default=""/>
    <aura:attribute name="hasSelectedUAE" type="boolean" default="false"/>
    <aura:attribute name="selectedTabsoft" type="string" default="duration" description="Use for show/hide arraow sign on header based on conditions"/>
    <aura:attribute name="arrowDirection" type="string" default="arrowup" description="Use for change arrow sign direction on header based on click"/>
    <aura:attribute name="ApplyDisable" type="boolean" default="false" description="Use to set false value to Submit Enrollment button"/>
    <aura:attribute name="errMsg" type="String" default=""/>
    <aura:attribute name="errMsgRequireObjects" type="String" default=""/>
    <aura:attribute name="oppType" type="String" default=""/>
    <aura:attribute name="sortAsc" type="boolean" default="false"/>
    <aura:attribute name="code" type="String" default=""/>
    <aura:attribute name="nameOfColumn" type="String" default=""/>
    <aura:attribute name="Renewalcode" type="String" default=""/>
    <aura:attribute name="selectedDateColumn" type="String" default=""/>
    <aura:attribute name="selectedUAEsActive" type="list"/>
    <aura:attribute name="selectedUAEs" type="list"/>
    <aura:attribute name="showResults" type="boolean" default="false"/>
    <aura:attribute name="ContractSignedDate" type="boolean" default="false"/>
    <aura:attribute name="warnMessage" type="string"/>
    <aura:attribute name="isAsc" type="boolean" default="true" description="boolean flag for pass sorting condition to apex class"/> 
    <aura:attribute name="selectedGrouptoPass" type="String" default="allUtilities"/>
    <aura:attribute name="spinner" type="boolean" default = "false"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <!-- added for info button SU-841 18-5-2022 -->
    <aura:attribute name="showModal1" type="boolean" default="false"/>
    <aura:attribute name="hoverRow" type="Integer" default="-1" />
    <aura:attribute name="ValidationMessage" type="String"/>
    <aura:attribute name="fromDate" type="date" default=""/>
    <aura:attribute name="toDate" type="date" default=""/>
    <aura:attribute name="openFilterModal" type="boolean" default = "false"/>
    <aura:attribute name="selectedColumn" type="String"/>
    <aura:attribute name="selectedColumnName" type="String"/>
    <aura:attribute name="previousFilters" type="String[]"/>
    <aura:handler name="compEvent" event="c:SelectedValueFilter" action="{!c.handleCmpEvent}" />
    <aura:html tag="style">
        .slds-popover{
        position : absolute;
        top : -16px;
        left : 13 px;
        }
    </aura:html>
    <lightning:card > 
        <aura:if isTrue="{!v.spinner}">
            <div aura:id="spinnerId" class="slds-spinner_container">
                <div class="slds-spinner--brand slds-spinner slds-spinner--large slds-is-relative" role="alert">
                    <span class="slds-assistive-text">Loading...</span>
                    <div class="slds-spinner__dot-a"></div>
                    <div class="slds-spinner__dot-b"></div>
                </div>
            </div>
        </aura:if>
        <aura:if isTrue="{!v.openModelBoolean}">
            <div aura:id="editDialog" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_small slds-backdrop ">
                <div class="slds-modal__container ">
                    <div class="slds-modal__header">
                        <lightning:dualListbox aura:id="selectOptions"
                                               name="Select Options"
                                               label="Select Options"
                                               sourceLabel="Available Fields"
                                               disableReordering = "true"
                                               selectedLabel="Visible Fields"
                                               options="{!v.options }"
                                               value="{!v.prvSelectedOptions}"
                                               />
                        <button class="slds-button slds-modal__close slds-button--icon" title="Close" onclick="{!c.closeModel}">
                            <lightning:icon iconName="utility:close" size="small" />
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <lightning:button class="slds-m-top_small" type="Cancel" label="Cancel" onclick="{!c.closeModel}" />
                        <lightning:button class="slds-m-top_small" type="Save" label="Save" variant="brand" onclick="{!c.handleSaveOptionChange}" />
                    </div>
                </div>
            </div>
        </aura:if>
        <div class="slds-page-header" style="padding-bottom: 18px; margin-top :0px;" role="banner">
            <span style="display:inline-block; ">
                <h1> <lightning:icon iconName="custom:custom67" size="small"/>
                    &nbsp;<b>Utility Account Enrollments (<lightning:formattedNumber value="{!v.BatchData.length}" maximumFractionDigits="0"/>)</b>
                </h1>
            </span>
        </div>
        <div>
            <div style="width:50%;display: inline-block;padding-left: 10px;">
                <div style="float:left;padding-right: 10px;">
                   <div style="float: left;padding-top: 22px;padding-left: 10px;padding-right: 5px;">Enrollment Status</div>
                     <div style="float: left;"><lightning:select aura:id="select" name="select" onchange="{! c.onFilterChange }">
                        <option value="defaultUAEs">Eligible for Enrollment</option>
                        <option value="acceptedUAEs">Accepted</option>
                        <option value="pendingUAEs">Pending</option>
                        <option value="failedUAEs">Failed</option>
                        <option value="submittedUAEs">Submitted</option>
                        <option value="allUAEs">All</option>
                        </lightning:select></div>
                </div>
                <div style="float:left;">
                    <div style="float: left;padding-top: 22px;padding-left: 10px;padding-right: 5px;">Utility Group</div>
                     <div style="float: left;"><lightning:select aura:id="selectGroup" name="selectGroup" onchange="{! c.onGroupChange }">
                        <option value="myGroups">My Groups</option>
                        <option value="groupA">Group A</option>
                        <option value="groupB">Group B</option>
                        <option value="groupC">Group C</option>
                        <option value="allUtilities">All</option>
                        </lightning:select></div>
                </div>
            </div>
            <div style="width:50%;display: inline-block;padding-right: 20px;">
                <div style="float:right;;">
                    <div style="float: right;"><lightning:icon style="cursor:pointer; padding-top: 11px;" iconName="utility:freeze_column" size="small" label="Columns" onclick="{!c.openModel}"/> </div>
                	<div style="float: right;padding-top: 14px;padding-left: 10px;padding-right: 5px;">Select Columns</div>
                </div>
                <div style="float:right;">
                    <div style="float: right;padding-top: 7px;"> <lightning:button  variant="brand" label="Reset Filter" title="Reset Filter" onclick="{! c.resetFilter }"/></div>
                </div>
            </div>
        </div>
      <!--  <lightning:layout verticalAlign="center" class="x-large">
            <lightning:layoutItem flexibility="auto" padding="around-small  slds-p-right_none" size="1">
                <div class="input-label">
                    <span style="float: right; padding-top: 11px;">Enrollment Status</span>
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem flexibility="auto" padding="around-small slds-p-left_none" size="1">
                <div class="inputs-field" >
                    <span><lightning:select aura:id="select" name="select" onchange="{! c.onFilterChange }">
                        <option value="defaultUAEs">Eligible for Enrollment</option>
                        <option value="acceptedUAEs">Accepted</option>
                        <option value="pendingUAEs">Pending</option>
                        <option value="failedUAEs">Failed</option>
                        <option value="submittedUAEs">Submitted</option>
                        <option value="allUAEs">All</option>
                        </lightning:select></span>
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem flexibility="auto" padding="around-small  slds-p-right_none" size="1">
                <div class="input-label">
                    <span style="float: right; padding-top: 11px;">Utility Group</span>
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem flexibility="auto" padding="around-small slds-p-left_none" size="2">
                <div class="inputs-field">
                    <span><lightning:select aura:id="selectGroup" name="selectGroup" onchange="{! c.onGroupChange }">
                        <option value="myGroups">My Groups</option>
                        <option value="groupA">Group A</option>
                        <option value="groupB">Group B</option>
                        <option value="groupC">Group C</option>
                        <option value="allUtilities">All</option>
                        </lightning:select></span>
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem flexibility="auto" padding="around-small" size="3">
            </lightning:layoutItem>
            <lightning:layoutItem flexibility="auto" padding="around-small" size="1">
                <span style="float: right; padding-top: 11px;"> <lightning:button  variant="brand" label="Reset Filter" title="Reset Filter" onclick="{! c.resetFilter }"/></span>
            </lightning:layoutItem>
            <lightning:layoutItem flexibility="auto"  size="1">
                <div class="input-label">
                    <span style="float: right; padding-top: 11px;">Select Columns</span>
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem flexibility="auto" padding="around-small">
                <div class="slt-icon slds-p-top_xx-small">
                    <lightning:icon style="cursor:pointer; padding-top: 11px;" iconName="utility:freeze_column" size="small" label="Columns" onclick="{!c.openModel}"/>                    
                </div>
            </lightning:layoutItem>
        </lightning:layout> -->
        <div class="tbl-listing-outer">
            <div class="tbl-listing" > 
                <lightning:card title="" >
                    <table class="slds-table slds-table_cell-buffer slds-table_bordered " > 
                        <!-- <div class="slds-scrollable_x" style="height:5rem;width:69rem"> class="slds-table slds-table_bordered slds-table_cell-buffer" -->
                        <div class="slds-scrollable_x"  >    
                            <thead>
                                <!-- <div class="slds-scrollable_x" style="height:5rem;width:69rem"> width:103.8rem -->
                                <tr class="">
                                    <th scope="col" style="width: 5px;">
                                        <ui:inputCheckbox disabled=""
                                                          value="false"
                                                          aura:id = "selectAllCheckbox"
                                                          change="{!c.selectAllCheckbox}"/> 
                                    </th>
                                    <aura:if isTrue="{!v.selectedOptBoolean}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByEN}">Enrollment ID</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'EN') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'EN') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Name,string" iconName="utility:filterList" value="Enrollment__r.Name" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean8}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByUAN}">Utility Account Number</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'UAN') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'UAN') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Utility_Account__r.Name,string" iconName="utility:filterList" value="Utility_Account__r.Name" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean6}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByCompanyName}">Company Name</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'compName') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'compName') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Account__r.Name,string" iconName="utility:filterList" value="Enrollment__r.Account__r.Name" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean4}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByBillType}">Bill Type</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'BillType') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'BillType') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Bill_Type__c,string" iconName="utility:filterList" value="Bill_Type__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                            
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean7}">
                                        <th class="slds-is-sortable " scope="col">
                                            
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort"  onclick="{!c.sortByUtility}">Utility</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'Utility') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'Utility') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>  
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Utility_Account__r.Utility__r.Name,string" iconName="utility:filterList" value="Utility_Account__r.Utility__r.Name" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                        
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean9}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByContractStart}">Contract Start</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'contractStart') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'contractStart') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Contract Start Date" iconName="utility:filterList" value="Enrollment__r.Contract__r.StartDate" alternativeText="Filter Utility" title="" onclick="{! c.dateFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean5}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByProd}">Product</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'prod') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'prod') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Product__c,string" iconName="utility:filterList" value="Enrollment__r.Product__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean11}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByRateAmmount}">Rate Amount</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'rateAmmount') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'rateAmmount') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Rate_Amount__c,integer" iconName="utility:filterList" value="Enrollment__r.Rate_Amount__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean1}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortCID}">Customer ID</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'custID') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'custID') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Account__r.Customer_ID__c,string" iconName="utility:filterList" value="Enrollment__r.Account__r.Customer_ID__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean17}">
                                        <th class="slds-is-sortable " scope="col"> 
                                            <span class="slds-assistive-text">Sort</span>
                                            <span class="slds-truncate" title="Sort">Marketer Rate Code</span>  
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Market_Rate_Code__c,string" iconName="utility:filterList" value="Market_Rate_Code__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                        
                                    </aura:if> 
                                    <aura:if isTrue="{!v.selectedOptBoolean18}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByStatus}">Status</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'Status') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'Status') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Status__c,string" iconName="utility:filterList" value="Status__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                        
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean19}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortBySA}">Service Address</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'SA') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'SA') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                           <!-- <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Utility_Account__r.Service_Address__c,string" iconName="utility:filterList" value="Utility_Account__r.Service_Address__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/> -->
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean20}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortBySC}">Service Class</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'SC') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'SC') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Utility_Account__r.Service_Class__c,string" iconName="utility:filterList" value="Utility_Account__r.Service_Class__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean2}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByContract}">Contract</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'contract') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'contract') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Contract__r.ContractNumber,string" iconName="utility:filterList" value="Enrollment__r.Contract__r.ContractNumber" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean3}">
                                        <th class="slds-is-sortable " scope="col">
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort"  onclick="{!c.sortByCSD}">Contract Signed Date</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'SD') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'SD') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a> 
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Contract Signed Date" iconName="utility:filterList" value="Enrollment__r.Contract_Signed_Date__c" alternativeText="Filter Utility" title="" onclick="{! c.dateFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean10}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByCT}">Contract Term</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'contractTerm') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'contractTerm') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Contract_Term__c,integer" iconName="utility:filterList" value="Enrollment__r.Contract_Term__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean12}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByTaxExempt}">Tax Exempt</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'taxExempt') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'taxExempt') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Tax_Exempt__c,boolean" iconName="utility:filterList" value="Tax_Exempt__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean21}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByTaxablePortion}">Taxable Portion</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'taxablePortion') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'taxablePortion') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Taxable_Portion__c,integer" iconName="utility:filterList" value="Enrollment__r.Taxable_Portion__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean22}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByAutoSubmitFlag}">AutoSubmitFlag</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'autoSubmitFlag') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'autoSubmitFlag') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="AutoSubmitFlag__c,boolean" iconName="utility:filterList" value="AutoSubmitFlag__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean23}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByRateClass}">RateClass</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'rateClass') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'rateClass') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="RateClass__c,string" iconName="utility:filterList" value="RateClass__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean13}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByCustomerType}">Customer Type</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'customerType') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'customerType') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Sale_Type__c,string" iconName="utility:filterList" value="Enrollment__r.Sale_Type__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean14}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByAMRD}">Avg. Meter Read Date</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'AMRD') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'AMRD') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Utility_Account__r.Average_Meter_Read_Date__c,string" iconName="utility:filterList" value="Utility_Account__r.Average_Meter_Read_Date__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean15}">
                                        <th class="slds-is-sortable " scope="col" >
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort" onclick="{!c.sortByBroker}">Broker</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'broker') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'broker') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Broker_Name__c,string" iconName="utility:filterList" value="Enrollment__r.Broker_Name__c" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean16}">
                                        <th class="slds-is-sortable " scope="col" onclick="{!c.sortByAccountOwner}">
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort">Account Owner</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'accountOwner') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'accountOwner') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Enrollment__r.Contract__r.Opportunity__r.Account.Owner.Name,string" iconName="utility:filterList" value="Enrollment__r.Contract__r.Opportunity__r.Account.Owner.Name" alternativeText="Filter Utility" title="" onclick="{! c.openFilterModal}"/>
                                        </th>
                                    </aura:if>
                                    <aura:if isTrue="{!v.selectedOptBoolean24}">
                                        <th class="slds-is-sortable " scope="col" onclick="{!c.sortByAccountOwner}">
                                            <a href="javascript:void(0);" class="slds-text-link--reset">
                                                <span class="slds-assistive-text">Sort</span>
                                                <span class="slds-truncate" title="Sort">Auto Submitted Date</span>  
                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'accountOwner') }">&nbsp;  &#9660; </aura:if>  
                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'accountOwner') }"> &nbsp;  &#9650; </aura:if>                        
                                            </a>
                                            <lightning:buttonIcon class="abc"  variant="bare" size="medium" name="Auto Submitted Date" iconName="utility:filterList" value="Auto_Submitted_Date__c" alternativeText="Filter Utility" title="" onclick="{! c.dateFilterModal}"/>
                                        </th>
                                    </aura:if>
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.PaginationList}" var="lineItem" indexVar="index">
                                    <!-- If Duplicate_Detected__c on UAE is True it will go into belwo if and change the background colour -->
                                    
                                    <aura:if isTrue="{!lineItem.objUAE.Duplicate_Detected__c == true}">
                                        
                                        <tr class="slds-hint-parent" style="background:#ff9999">
                                            
                                            <td data-label="" style="display: inline-flex;width:100%;" >
                                                <div class="slds-truncate" title="">
                                                    <ui:inputCheckbox disabled="{!equals(lineItem.objUAE.Status__c, 'Enrollment Request Accepted') || lineItem.invalidDate || lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c ==undefined || lineItem.isNationalGridandNullMarketRate==true || lineItem.errorMsg !='' }"
                                                                      name="{!index}"
                                                                      value="{!lineItem.isChecked}"
                                                                      change="{!c.checkboxSelect}"/>                                        
                                                </div>
                                                <!-- hover functionality -->
                                                <aura:if isTrue= "{!equals(lineItem.objUAE.Status__c, 'Enrollment Request Accepted') || lineItem.invalidDate || lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c ==undefined || lineItem.isNationalGridandNullMarketRate==true || lineItem.errorMsg !=''}">
                                                    <!-- <aura:if isTrue="{!NOT(equals(lineItem.objUAE.Status__c, 'Enrollment Request Accepted'))}"> -->
                                                    <lightning:icon style="margin-left: 6px;" alternativeText="{!index}" onmouseenter="{!c.showtooltip}" onmouseleave="{!c.hidetooltip}"  iconName="utility:info" size="x-small" class= "iconsize"/>
                                                    <!-- </aura:if> -->
                                                    
                                                    <aura:if isTrue="{!v.hoverRow==index}"> 
                                                        <aura:if isTrue="{!v.showModal1}">
                                                            <!--  <aura:if isTrue= "equals(lineItem.objUAE.Status__c, 'Enrollment Request Accepted') || lineItem.invalidDate || lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c ==undefined || lineItem.isNationalGridandNullMarketRate==true || lineItem.errorMsg !=''"> -->
                                                            <div class="mypopover slds-is-relative" data-selected-Index="{!index}">                                                    
                                                                <section class="slds-popover slds-nubbin_left-top"
                                                                         role="dialog" style="width:auto">
                                                                    <div class="slds-popover__body" id="dialog-body-id-77">                              
                                                                        <p><c:EnrollmentValidationHover warnMessage="{!lineItem.errorMsg}" contractSignDate = "{!lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c}" lineItemMarketRateCode="{!lineItem.MarketRateCode}" isNationalGridandNullMarketRate = "{!lineItem.isNationalGridandNullMarketRate}" /></p> <!-- here should be component calling for displaying validation errors -->
                                                                    </div>
                                                                </section>
                                                            </div>
                                                            <!-- </aura:if> -->
                                                        </aura:if>
                                                    </aura:if> 
                                                </aura:if>
                                            </td>
                                            <aura:if isTrue="{!v.selectedOptBoolean}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Name}">
                                                        <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__c + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Name}</a>
                                                    </div>
                                                </td>  
                                                
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean8}">
                                                <td scope="row">
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Utility_Account__r.Name}">
                                                        <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Utility_Account__c + '/view'}" target="_blank">  {!lineItem.objUAE.Utility_Account__r.Name}</a>
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean6}">
                                                <td data-label="" > 
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Account__r.Name}">
                                                        <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.Account__c + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Account__r.Name}</a>
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean4}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="">
                                                        {!lineItem.objUAE.Bill_Type__c}
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean7}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Utility_Account__r.Utility__r.Name}">
                                                        <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Utility_Account__r.Utility__c + '/view'}" target="_blank">  {!lineItem.objUAE.Utility_Account__r.Utility__r.Name}</a>
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean9}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="">
                                                        {!lineItem.objUAE.Enrollment__r.Contract__r.StartDate}
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean5}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Product__c}">
                                                        <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.ProductId__c + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Product__c}</a>
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean11}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Rate_Amount__c}">
                                                        <lightning:formattedNumber value="{!lineItem.objUAE.Enrollment__r.Rate_Amount__c}"
                                                                                   minimumFractionDigits="5" maximumFractionDigits="5"/>
                                                        
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean1}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Account__r.Customer_ID__c}">
                                                        {!lineItem.objUAE.Enrollment__r.Account__r.Customer_ID__c}
                                                    </div>
                                                </td>    
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean17}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="">
                                                        <!-- {!lineItem.objUAE.Utility_Account__r.Market_Rate_Code__c} -->
                                                        {!lineItem.objUAE.Market_Rate_Code__c} 
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean18}">
                                                <td scope="row">
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Status__c}" style = "{!if(lineItem.editStatus, 'width:235px;display: flex;','width:200px;')}">
                                                        <aura:if isTrue="{!lineItem.editStatus}">
                                                            <lightning:select name="select" class="status" value="{!lineItem.objUAE.Status__c}">
                                                                <option text="Enrollment Request Pending" value="Enrollment Request Pending"></option>
                                                                <option text="Enrollment Request Accepted" value="Enrollment Request Accepted"></option>
                                                                <option text="Enrollment Request Failed" value="Enrollment Request Failed"></option>
                                                                <option text="Enrollment Request Submitted" value="Enrollment Request Submitted"></option>
                                                            </lightning:select> 
                                                            &nbsp;
                                                            <lightning:buttonIcon iconName="utility:check" disabled="" variant="bare"  name="{!index}" alternativeText="Edit" title="Edit" onclick="{!c.saveStatus}" /> 
                                                            &nbsp;<lightning:buttonIcon iconName="utility:close" disabled="" variant="bare"  alternativeText="Cancel"  name="{!index}" title="Cancel" onclick="{!c.editStatus}" />
                                                            <span style="color: red">{!v.errorMessage}</span>
                                                            <aura:set attribute="else">
                                                                <span>{!lineItem.objUAE.Status__c}<lightning:buttonIcon class="slds-float_right" variant="bare"  alternativeText="Edit" title="Edit" iconName="utility:edit" size="small" onclick="{!c.editStatus}" name="{!index}" /></span>
                                                            </aura:set>
                                                        </aura:if>
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean19}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="">
                                                        {!lineItem.objUAE.Utility_Account__r.Service_Address__c}
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean20}">
                                                <td  scope="row">
                                                    <div class="slds-truncate" >
                                                        {!lineItem.objUAE.Utility_Account__r.Service_Class__c }
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean2}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Contract__r.ContractNumber}">
                                                        <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.Contract__r.Id + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Contract__r.ContractNumber}</a>
                                                    </div>
                                                </td>    
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean3}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="">
                                                        {!lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c}
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean10}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Contract_Term__c}">
                                                        {!lineItem.objUAE.Enrollment__r.Contract_Term__c}
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean12}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Tax_Exempt__c}">
                                                        {!lineItem.objUAE.Tax_Exempt__c}
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean21}">
                                                <td  scope="row">
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Taxable_Portion__c }">
                                                        {!lineItem.objUAE.Enrollment__r.Taxable_Portion__c}<aura:if isTrue="{!not(empty(lineItem.objUAE.Enrollment__r.Taxable_Portion__c))}">%</aura:if>
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean22}">
                                                <td  scope="row">
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.AutoSubmitFlag__c }">
                                                        {!lineItem.objUAE.AutoSubmitFlag__c}
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean23}">
                                                <td  scope="row">
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.RateClass__c }">
                                                        {!lineItem.objUAE.RateClass__c}
                                                    </div>
                                                </td>
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean13}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Sale_Type__c}">
                                                        {!lineItem.objUAE.Enrollment__r.Sale_Type__c}
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean14}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Utility_Account__r.Average_Meter_Read_Date__c}">
                                                        {!lineItem.objUAE.Utility_Account__r.Average_Meter_Read_Date__c}
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean15}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Broker_Name__c}">
                                                        <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.Broker_Id__c + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Broker_Name__c}</a>
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean16}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Contract__r.Opportunity__r.Account.Owner.Name}">
                                                        <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.Contract__r.Opportunity__r.Account.Owner.Id + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Contract__r.Opportunity__r.Account.Owner.Name}</a>
                                                    </div>
                                                </td> 
                                            </aura:if>
                                            <aura:if isTrue="{!v.selectedOptBoolean24}">
                                                <td data-label="" >
                                                    <div class="slds-truncate" title="{!lineItem.objUAE.Auto_Submitted_Date__c}">
                                                         {!lineItem.objUAE.Auto_Submitted_Date__c}
                                                    </div>
                                                </td> 
                                            </aura:if>
                                        </tr>
                                        
                                        <!-- If Duplicate_Detected__c on UAE is True it will go into belwo else and change the background colour -->
                                        
                                        <aura:set attribute="else">
                                            
                                            <tr class="slds-hint-parent">
                                                <td data-label="" style="display: inline-flex;width:100%;" >
                                                    <div class="slds-truncate" title="">
                                                        <ui:inputCheckbox disabled="{!equals(lineItem.objUAE.Status__c, 'Enrollment Request Accepted') || lineItem.invalidDate || lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c ==undefined || lineItem.isNationalGridandNullMarketRate==true || lineItem.errorMsg !='' }"
                                                                          name="{!index}"
                                                                          value="{!lineItem.isChecked}"
                                                                          change="{!c.checkboxSelect}"/>                                        
                                                    </div>
                                                    <!-- hover functionality -->
                                                    <aura:if isTrue= "{!equals(lineItem.objUAE.Status__c, 'Enrollment Request Accepted') || lineItem.invalidDate || lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c ==undefined || lineItem.isNationalGridandNullMarketRate==true || lineItem.errorMsg !=''}">
                                                        <!-- <aura:if isTrue="{!NOT(equals(lineItem.objUAE.Status__c, 'Enrollment Request Accepted'))}"> -->
                                                        <lightning:icon style="margin-left: 6px;" alternativeText="{!index}" onmouseenter="{!c.showtooltip}" onmouseleave="{!c.hidetooltip}"  iconName="utility:info" size="x-small" class= "iconsize"/>
                                                        <!-- </aura:if> -->
                                                        
                                                        <aura:if isTrue="{!v.hoverRow==index}"> 
                                                            <aura:if isTrue="{!v.showModal1}">
                                                                <!--  <aura:if isTrue= "equals(lineItem.objUAE.Status__c, 'Enrollment Request Accepted') || lineItem.invalidDate || lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c ==undefined || lineItem.isNationalGridandNullMarketRate==true || lineItem.errorMsg !=''"> -->
                                                                <div class="mypopover slds-is-relative" data-selected-Index="{!index}">                                                    
                                                                    <section class="slds-popover slds-nubbin_left-top"
                                                                             role="dialog" style="width:auto">
                                                                        <div class="slds-popover__body" id="dialog-body-id-77">                              
                                                                            <p><c:EnrollmentValidationHover warnMessage="{!lineItem.errorMsg}" contractSignDate = "{!lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c}" lineItemMarketRateCode="{!lineItem.MarketRateCode}" isNationalGridandNullMarketRate = "{!lineItem.isNationalGridandNullMarketRate}" /></p> <!-- here should be component calling for displaying validation errors -->
                                                                        </div>
                                                                    </section>
                                                                </div>
                                                                <!-- </aura:if> -->
                                                            </aura:if>
                                                        </aura:if>
                                                    </aura:if>
                                                </td>
                                                <aura:if isTrue="{!v.selectedOptBoolean}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Name}">
                                                            <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__c + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Name}</a>
                                                        </div>
                                                    </td>  
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean8}">
                                                    <td scope="row">
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Utility_Account__r.Name}">
                                                            <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Utility_Account__c + '/view'}" target="_blank">  {!lineItem.objUAE.Utility_Account__r.Name}</a>
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean6}">
                                                    <td data-label="" > 
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Account__r.Name}">
                                                            <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.Account__c + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Account__r.Name}</a>
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean4}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="">
                                                            {!lineItem.objUAE.Bill_Type__c}
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean7}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Utility_Account__r.Utility__r.Name}">
                                                            <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Utility_Account__r.Utility__c + '/view'}" target="_blank">  {!lineItem.objUAE.Utility_Account__r.Utility__r.Name}</a>
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean9}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="">
                                                            {!lineItem.objUAE.Enrollment__r.Contract__r.StartDate}
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean5}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Product__c}">
                                                            <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.ProductId__c + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Product__c}</a>
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean11}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Rate_Amount__c}">
                                                            <lightning:formattedNumber value="{!lineItem.objUAE.Enrollment__r.Rate_Amount__c}"
                                                                                       minimumFractionDigits="5" maximumFractionDigits="5"/>
                                                            
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean1}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Account__r.Customer_ID__c}">
                                                            {!lineItem.objUAE.Enrollment__r.Account__r.Customer_ID__c}
                                                        </div>
                                                    </td>    
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean17}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="">
                                                            <!-- {!lineItem.objUAE.Utility_Account__r.Market_Rate_Code__c} -->
                                                            {!lineItem.objUAE.Market_Rate_Code__c} 
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean18}">
                                                    <td scope="row">
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Status__c}" style = "{!if(lineItem.editStatus, 'width:235px;display: flex;','width:200px;')}">
                                                            <aura:if isTrue="{!lineItem.editStatus}">
                                                                <lightning:select name="select" class="status" value="{!lineItem.objUAE.Status__c}">
                                                                    <option text="Enrollment Request Pending" value="Enrollment Request Pending"></option>
                                                                    <option text="Enrollment Request Accepted" value="Enrollment Request Accepted"></option>
                                                                    <option text="Enrollment Request Failed" value="Enrollment Request Failed"></option>
                                                                    <option text="Enrollment Request Submitted" value="Enrollment Request Submitted"></option>
                                                                </lightning:select> 
                                                                &nbsp;
                                                                <lightning:buttonIcon iconName="utility:check" disabled="" variant="bare"  name="{!index}" alternativeText="Edit" title="Edit" onclick="{!c.saveStatus}" /> 
                                                                &nbsp;<lightning:buttonIcon iconName="utility:close" disabled="" variant="bare"  alternativeText="Cancel"  name="{!index}" title="Cancel" onclick="{!c.editStatus}" />
                                                                <span style="color: red">{!v.errorMessage}</span>
                                                                <aura:set attribute="else">
                                                                    <span>{!lineItem.objUAE.Status__c}<lightning:buttonIcon class="slds-float_right" variant="bare"  alternativeText="Edit" title="Edit" iconName="utility:edit" size="small" onclick="{!c.editStatus}" name="{!index}" /></span>
                                                                </aura:set>
                                                            </aura:if>
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean19}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="">
                                                            {!lineItem.objUAE.Utility_Account__r.Service_Address__c}
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean20}">
                                                    <td  scope="row">
                                                        <div class="slds-truncate" >
                                                            {!lineItem.objUAE.Utility_Account__r.Service_Class__c }
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean2}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Contract__r.ContractNumber}">
                                                            <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.Contract__r.Id + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Contract__r.ContractNumber}</a>
                                                        </div>
                                                    </td>    
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean3}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="">
                                                            {!lineItem.objUAE.Enrollment__r.Contract_Signed_Date__c}
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean10}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Contract_Term__c}">
                                                            {!lineItem.objUAE.Enrollment__r.Contract_Term__c}
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean12}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Tax_Exempt__c}">
                                                            {!lineItem.objUAE.Tax_Exempt__c}
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean21}">
                                                    <td  scope="row">
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Taxable_Portion__c }">
                                                            {!lineItem.objUAE.Enrollment__r.Taxable_Portion__c}<aura:if isTrue="{!not(empty(lineItem.objUAE.Enrollment__r.Taxable_Portion__c))}">%</aura:if>
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean22}">
                                                    <td  scope="row">
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.AutoSubmitFlag__c }">
                                                            {!lineItem.objUAE.AutoSubmitFlag__c}
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean23}">
                                                    <td  scope="row">
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.RateClass__c }">
                                                            {!lineItem.objUAE.RateClass__c}
                                                        </div>
                                                    </td>
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean13}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Sale_Type__c}">
                                                            {!lineItem.objUAE.Enrollment__r.Sale_Type__c}
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean14}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Utility_Account__r.Average_Meter_Read_Date__c}">
                                                            {!lineItem.objUAE.Utility_Account__r.Average_Meter_Read_Date__c}
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean15}">
                                                    <td data-label="" > 
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Broker_Name__c}">
                                                            <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.Broker_Id__c + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Broker_Name__c}</a>
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean16}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Enrollment__r.Contract__r.Opportunity__r.Account.Owner.Name}">
                                                            <a href="{!'/one/one.app?#/sObject/'+ lineItem.objUAE.Enrollment__r.Contract__r.Opportunity__r.Account.Owner.Id + '/view'}" target="_blank">  {!lineItem.objUAE.Enrollment__r.Contract__r.Opportunity__r.Account.Owner.Name}</a>
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                <aura:if isTrue="{!v.selectedOptBoolean24}">
                                                    <td data-label="" >
                                                        <div class="slds-truncate" title="{!lineItem.objUAE.Auto_Submitted_Date__c}">
                                                            {!lineItem.objUAE.Auto_Submitted_Date__c}
                                                        </div>
                                                    </td> 
                                                </aura:if>
                                                
                                            </tr>                                         
                                            
                                        </aura:set>
                                    </aura:if>
                                    
                                </aura:iteration>
                            </tbody>
                        </div>
                    </table>
                </lightning:card>
            </div>
        </div>
        <div class="tbl-pagination">
            <lightning:layoutItem padding="around-small" flexibility="auto" class = "slds-align_absolute-center">
                <lightning:button label="First" iconName="utility:left" iconPosition="left"
                                  onclick="{!c.onFirst}" disabled="{! v.currentPageNumber == 1}"/>
                <lightning:button iconName="utility:chevronleft" iconPosition="left"
                                  onclick="{!c.onPrev}" disabled="{! v.currentPageNumber == 1}"/>
                <button value = "1"  onclick="{!c.onFirst}" disabled="{!item=='...'}" class="{!if(v.currentPageNumber==1,'slds-button slds-button_brand','slds-button slds-button_neutral')}"   data-record="1" name="1" onmousedown="{!c.currentPage}"   >
                    <ui:outputNumber value="1"/>
                </button>
                <aura:iteration items="{!v.pageList}" var="item">
                    <button value = "{!item}"  onclick="{!c.processMe}" disabled="{!item=='...'}" class="{!if(v.currentPageNumber==item,'slds-button slds-button_brand','slds-button slds-button_neutral')}"   data-record="{!num}" name="{!num}" onmousedown="{!c.currentPage}"   >
                        {!item}
                    </button>
                </aura:iteration>
                <aura:if isTrue = "{!and(v.totalPages != 0 , v.totalPages !=1)}">
                    <button value = "{!v.totalPages}"  onclick="{!c.onLast}" disabled="{!item=='...'}" class="{!if(v.currentPageNumber == v.totalPages,'slds-button slds-button_brand','slds-button slds-button_neutral')}"   data-record="{!v.totalPages}" name="{!v.totalPages}" onmousedown="{!c.currentPage}"   >
                        <ui:outputNumber value="{!v.totalPages}"/>
                    </button>
                </aura:if>
                <lightning:button iconName="utility:chevronright" iconPosition="right" 
                                  disabled="{! v.currentPageNumber == v.totalPages}" onclick="{!c.onNext}"/>
                <lightning:button label="Last" iconName="utility:right" iconPosition="right" 
                                  disabled="{! v.currentPageNumber == v.totalPages}" onclick="{!c.onLast}"/>
                <lightning:formattedText class = "slds-m-left--small slds-m-right--small" value="Show Records: " />
                <div style="padding-bottom: 14px; margin-top :-5px;">
                    <span style="display:inline-block; ">
                        <lightning:select class = "showRecordsSelect" disabled="{!lessthanorequal(v.BatchData.length,5)}" required="false"  value = "{!v.pageSize}" onchange="{! c.changePageSize }">
                            <option value="5">5</option>
                            <option value="10">10</option>
                            <option value="15">15</option>
                            <option value="20">20</option>
                            <option value="{!v.totalRecordsCount}">All</option>
                        </lightning:select>
                    </span>
                </div>
                <div class="submit-btn">
                    <lightning:button  variant="Brand" disabled="{! v.hasSelectedUAE == false }" label="Submit Enrollment" onclick="{!c.handleSubmit11}"/>
                </div>
            </lightning:layoutItem> 
        </div>
        <aura:if isTrue="{!v.openFilterModal}">
            
            <p><c:genericExcelLikeFilter PaginationList="{!v.TotalData}" previousValues="{!v.SelectedData}" GenericList="{!v.TotalData}" SelectedColumn="{!v.selectedColumn}" /></p> 
            
        </aura:if>
        
        <div class="slds-m-around_xx-large">
            <!--Use aura:if tag to display/hide popup based on isModalOpen value-->  
            <aura:if isTrue="{!v.dateFilterModal}">
                
                <!-- Modal/Popup Box starts here-->
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <!-- Modal/Popup Box Header Starts here-->
                        <header class="slds-modal__header">
                            <lightning:buttonIcon iconName="utility:close"
                                                  onclick="{! c.closeModel }"
                                                  alternativeText="close"
                                                  variant="bare-inverse"
                                                  class="slds-modal__close"/>
                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Date Filter for {!v.nameOfColumn} </h2>
                        </header>
                        <!--Modal/Popup Box Body Starts here-->
                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                            <lightning:layout verticalAlign="center" >
                                <lightning:layoutItem size="1">
                                </lightning:layoutItem>
                                <lightning:layoutItem padding="around-small" size="5" flexibility="auto">
                                    <div class="inputs-field">
                                        <span><lightning:input aura:id="fromDate" type="date" name="input1" value="{!v.fromDate}" label="From date" onchange="{!c.onStartDateFromChange}" default="" /></span>
                                    </div>
                                </lightning:layoutItem>
                                <lightning:layoutItem>
                                </lightning:layoutItem>
                                <lightning:layoutItem padding="around-small" size="6" flexibility="auto">
                                    <div class="inputs-field">
                                        <span><lightning:input aura:id="toDate" size="100%" type="date" name="input1" value="{!v.toDate}" label="To date" onchange="{!c.onStartDateToChange}" default=""/></span>
                                    </div>
                                </lightning:layoutItem>
                            </lightning:layout>
                        </div>
                        <!--Modal/Popup Box Footer Starts here-->
                        <footer class="slds-modal__footer">
                            <lightning:button variant="brand"
                                              label="OK"
                                              title="OK"
                                              onclick="{!c.closeModel}"/>
                        </footer>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>
        </div>        
    </lightning:card> 
</aura:component>